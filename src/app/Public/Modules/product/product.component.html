<app-header [cartCount]="cartCount"></app-header>
<app-common-banner></app-common-banner>

<div class="container mt-5 mb-2 animate five fadeInUp">
  <div class="row">
    <!-- Filters Section -->
    <div class="col-lg-3 shop-left">
      <form class="position-relative d-flex align-items-center justify-content-between">
        <input pInputText type="text" placeholder="Search" class="px-2 py-1" />
        <button pButton type="submit" class="p-button-text position-absolute rounded-1 end-0 search-btn">
          <i class="pi pi-search"></i>
        </button>
      </form>
      <div class="mt-4 py-1 px-3 acc-heading d-flex align-items-center justify-content-between">
        <h5 class="mb-0">Filters</h5>
        <button pButton class="p-button-text p-0 end-0">
          <p class="mb-0 text-white fw-medium">Clear all</p>
        </button>
      </div>
      <!-- Categories Filter -->
      <p-accordion>
        <p-accordionTab header="Categories">
          <ul class="list-unstyled mb-0">
            <li *ngFor="let category of categories" class="pb-2" [ngStyle]="{
                color: selectedCategory === category.name ? '#992603' : '#000'
              }" (click)="selectCategory(category.name)">
              {{ category.name }}
            </li>
          </ul>
        </p-accordionTab>

        <!-- Price Filter -->
        <p-accordionTab header="Price">
          <ul class="list-unstyled mb-0">
            <li *ngFor="let filter of priceFilters" class="pb-2 d-flex align-items-center gap-2">
              <p-checkbox binary="true" [(ngModel)]="selectedPriceFilter" [value]="filter"
                (onChange)="selectPriceFilter(filter)"></p-checkbox>
              <span>{{ filter.min }} - {{ filter.max }}</span>
            </li>
          </ul>
        </p-accordionTab>
      </p-accordion>
    </div>
    <!-- Product List Section -->
    <div class="col-lg-9 shop-right">
      <div class="product-topbar d-flex justify-content-between align-items-center">
        <p class="mb-0">{{ getDisplayedRange() }}</p>
        <div class="d-flex justify-content-between align-items-center">
          <p class="mb-0">Sort by Price:</p>
          &nbsp;
          <p-dropdown [options]="sortOptions" [(ngModel)]="selectedSort" placeholder="Low to High"></p-dropdown>
        </div>
      </div>
      <div class="d-flex flex-wrap gap-3">
        <div class="col-lg-3 d-flex justify-content-center animated mt-3" *ngFor="let product of filteredProducts">
          <a [routerLink]="['/product-detail']" class="product position-relative">
            <div class="product-img p-2 w-100">
              <img [src]="product.image" alt="product image" class="w-100 h-100" />
            </div>
            <div class="product-content d-flex justify-content-between align-items-center mt-2">
              <div class="flex-column w-100">
                <h6 class="product-name">{{ product.name }}</h6>
                <h5 class="price mb-0">
                  {{ product.price | currency : "INR" }}
                </h5>
              </div>
              <div class="shopping-bag-icon position-absolute" style="bottom: 45px; right: 5px">
                <p-button icon="pi pi-shopping-bag"></p-button>
              </div>
            </div>
          </a>
        </div>
      </div>
      <!-- Pagination -->
      <div class="divider3"></div>
      <p-paginator [rows]="rowsPerPage" [totalRecords]="totalProducts" (onPageChange)="onPageChange($event)">
      </p-paginator>
    </div>
  </div>
</div>